<script>
  function search(s,o) {
    var r = new XMLHttpRequest();
    var q = '?q=' + encodeURIComponent(s || '') + (o ? '&o=' + o : '');
    r.open('GET', '/q'+q);
    r.onload = function() {
      document.getElementById('results').innerHTML = r.responseText;
      window.scrollTo(0, 0);
      history.replaceState({}, null, q);
    }
    r.send();
    document.getElementById('q').value = s || '';
  }
  window.onload = function() {
    document.getElementById('q').value = new URLSearchParams(location.search).get('q') || '';
  }
</script>
